# Effective Object-C 2.0
## 熟悉 Objective—C
### 理论：1.Objective-C 起源
该语言使用 ”消息结构“ 而不是 ”函数调用“。**Objective-C** 语言由 **Smalltalk** 演化而来，后者是消息型语言的鼻祖。消息和函数调用之间的区别

```
 // Messaging(Objective-c)
 Object *obj = [Object new];
 [obj performWith:parameter1 and:parameter2];
 
 // Function calling(C++)
 Object *obj = new Object;
 obj->perform(parameter1,parameter2);
```

关键区别在于：使用消息结构的语言，其运行时所应执行的代码由运行环境来决定；而使用函数调用的语言，则由编译器决定。甚至不关心接收消息的对象是何种类型。接收消息的对象问题也要在运行时处理，其过程叫 ”动态绑定“。

Objective-C 的重要工作都由 ”运行期组件“ 而非编译器来完成。使用 Objective-C 的面向对象特性所需的全部数据结构及函数都在运行期组件里面。**只需要更新运行时组件，即可提升应用程序性能。**

对象所占内存总是分配在 ”堆空间“，变量指针的是分配在 ”栈区“。
分配在堆中的内存必须直接管理，而分配在栈上用于保存变量的内存则会再其栈帧弹出时自动清理。

Objective-C 使用 ”引用计数“ 来管理 (CGRect 是 C 结构体)
（整个系统框架都是在使用这种结构体，如果使用 Objective-C 对象来做的话，性能会受影响。如果使用对象，需要额外开销，例如分配及释放内存）


### 实用：2. 在类的头文件中尽量少引入其他头文件
1. 除非有必要，否则不要引入头文件。一般来说，应在某个类的文件中使用向前声明来提及别的类，尽量降低类之间的耦合。
2. 声明某个类遵循一项协议，尽量把 ”该类遵循某协议“ 的这条声明移至 ”class-continuation 分类“ 中。 单独放在一个头文件中，然后将其引入。


### 实用：3. 多用字面量语法，少用与之等价的方法
1. 使用字面量语法来创建字符串，数值，数组，字典。
2. 应通过取下标来访问数组下标或字典中的键所对应的元素。
3. 用字面量语法创建数组或字典时，若值为 nil，则为抛出异常。

### 实用：多用类型常量，少用 #define 预处理指令
1. 不要用预处理指令定义常量。这样定义出来的常量不含类型信息，编译器只是会再编译前据此执行查找与替换操作。即使用人重新定义了常量值，编译器也不会产生警告信息，浙江导致应用程序中的常量值不一样。
2. 在实现文件中使用 static const 来定义 ”只在编译单元内可见“，无须为其加前缀。
3. 在头文件中使用 extern 来声明全局常量，并在实现文件中定义其值，通常用与之相关的类名做前缀。（.h 文件：extern const NSTimeIntrerval EOCAnimatedViewAnimationDuration;）(.m 文件：const NSTimeInterval EOCAnimatedViewAnimationDuration = 0.3;)
	
### 实用：用枚举表示状态、选项、状态码
1. 应用枚举来表示状态机的状态，传递给方法的选项以及状态码等值。
2. 如果把传递给某个方法的选项表示为枚举类型，而多个选项又可同时实用，那么就将各选项值定义为 2 的幂，一遍通过按位或操作将其组合起来。
3. 用 NS_ENUM 与 NS_OPTIONS（用幂的方式） 宏来定义枚举类型，并指明其底层数据类型。
4. 在处理枚举类型的 switch 语句中不要实现 default 分支。